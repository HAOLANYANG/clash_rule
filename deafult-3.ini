mixed-port: 10801
external-controller: '127.0.0.1:9091'
allow-lan: false
bind-address: "*"
find-process-mode: strict

mode: rule
geox-url:
  geoip: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat"
  geosite: "https://cdn.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat"
  mmdb: "https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb"
  asn: "https://cdn.jsdelivr.net/gh/Loyalsoldier/geoip@release/GeoLite2-ASN.mmdb"

geo-auto-update: true # æ˜¯å¦è‡ªåŠ¨æ›´æ–° geodata
geo-update-interval: 24 # æ›´æ–°é—´éš”ï¼Œå•ä½ï¼šå°æ—¶
log-level: silent

ipv6: false

hosts:
    dns.google: 8.8.8.8
    dns.alidns.com: 223.5.5.5
    doh.pub: 1.12.12.12
    dot.pub: 120.53.53.53
    doh.opendns.com: 208.67.222.222
profile: 
  # å­˜å‚¨ select é€‰æ‹©è®°å½•
  store-selected: false
  # æŒä¹…åŒ– fake-ip
  store-fake-ip: true
tun:
    enable: true
    stack: gvisor
    dns-hijack: ['any:53', 'tcp://any:53']
    udp-timeout: 300
    auto-route: true
    strict-route: true
    auto-redirect: false
    auto-detect-interface: true
    route-exclude-address: [192.168.0.0/16, 'fc00::/7']
    exclude-package: [com.tencent.tmgp.sgame, com.tencent.tmgp.pubgmhd, com.tencent.jkchess]

dns:
    cache-algorithm: arc
    enable: true
    prefer-h3: true
    use-hosts: true
    use-system-hosts: true
    listen: 0.0.0.0:53 # å¼€å¯ DNS æœåŠ¡å™¨ç›‘å¬
    enhanced-mode: fake-ip
    fake-ip-range: 28.0.0.1/8
    fake-ip-filter:
      - '+.lan'
      - '+.local' 
      - '*.localdomain'
      - miwifi.com
      - geosite:cn,private,apple
      - '*.example'
      - '*.invalid'
      - '*.localhost'
      - '*.test'
      - '*.local'
      - "*.home.arpa"
      - "stun.*"
      - "+.stun.com"
      - "+.qq.com"
      - "+.tencent.com"
      - "+.doh.pub"
      - "sm2.doh.pub"
      - "qlogo.cn"
      - "*.qlogo.cn"
      - "connect.rom.miui.com"
      - "WORKGROUP"
      - "localhost.ptlogin2.qq.com"
      - "+.market.xiaomi.com"
      - "+.cmbchina.com"
      - "+.cmbimg.com"
      - "*.mcdn.bilivideo.cn"
      - "+.apple.com"
      - "lens.l.google.com"
      - "stun.l.google.com"- "na.b.g-tun.com"
      - 'time.*.com'
      - 'time.*.gov'
      - 'time.*.edu.cn'
      - 'time.*.apple.com'
      - 'time1.*.com'
      - 'time2.*.com'
      - 'time3.*.com'
      - 'time4.*.com'
      - 'time5.*.com'
      - 'time6.*.com'
      - 'time7.*.com'
      - 'ntp.*.com'
      - 'ntp1.*.com'
      - 'ntp2.*.com'
      - 'ntp3.*.com'
      - 'ntp4.*.com'
      - 'ntp5.*.com'
      - 'ntp6.*.com'
      - 'ntp7.*.com'
      - '*.time.edu.cn'
      - '*.ntp.org.cn'
      - '+.pool.ntp.org'
      - 'time1.cloud.tencent.com'
      - '+.pub.3gppnetwork.org'
    fake-ip-filter-mode: blacklist
    respect-rules: false #ä½¿dnsæŸ¥è¯¢èµ°è§„åˆ™
    default-nameserver: # ç”¨äºè§£æ nameserverï¼Œfallback ä»¥åŠå…¶ä»– DNS æœåŠ¡å™¨é…ç½®çš„ï¼ŒDNS æœåŠ¡åŸŸå
      - 114.114.114.114
      - tls://1.12.12.12:853
      - tls://223.5.5.5:853
      - system # append DNS server from system configuration. If not found, it would print an error log and skip.
    nameserver:
      - https://8.8.4.4/dns-query#DNS
      - https://8.8.8.8/dns-query#DNS
      - https://1.1.1.1/dns-query#DNS
      - https://208.67.222.222/dns-query#DNS
    nameserver-policy:
        "geosite:cn,private,apple":
          - https://223.5.5.5/dns-query
          - https://sm2.doh.pub/dns-query
          - https://1.12.12.12/dns-query
        "geosite:google":
          - https://8.8.8.8/dns-query#DNS
          - https://8.8.4.4/dns-query#DNS
        "www.baidu.com,+.google.cn":
          - https://223.5.5.5/dns-query
          - https://1.12.12.12/dns-query
    proxy-server-nameserver:
      - https://8.8.4.4/dns-query#DNS
      - https://223.5.5.5/dns-query
      - https://223.6.6.6/dns-query
      - https://1.12.12.12/dns-query

proxies:
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: direct, udp: true}
  
proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    disable-udp: false
    proxies:
      - â™»ï¸ å»¶è¿Ÿæœ€ä½
      - ğŸ”¯ æ•…éšœè½¬ç§»
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡² ç¾å›½
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ  IPLCä¸“çº¿
  - name: "ğŸ“¹ æ²¹ç®¡è§†é¢‘"
    type: select
    disable-udp: false
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡² ç¾å›½
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ  IPLCä¸“çº¿ 
      - â™»ï¸ å»¶è¿Ÿæœ€ä½
      - ğŸ”¯ æ•…éšœè½¬ç§»
  - name: "ğŸ¥ æµåª’ä½“è§£é”"
    type: select
    disable-udp: false
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡² ç¾å›½
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ  IPLCä¸“çº¿ 
      - â™»ï¸ å»¶è¿Ÿæœ€ä½
      - ğŸ”¯ æ•…éšœè½¬ç§»
  - name: "ğŸ’¬ OpenAi"
    type: select
    disable-udp: false
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡² ç¾å›½
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ  IPLCä¸“çº¿ 
      - â™»ï¸ å»¶è¿Ÿæœ€ä½
      - ğŸ”¯ æ•…éšœè½¬ç§»
  - name: "ğŸŸ¨ åŒºå—é“¾"
    type: select
    disable-udp: false
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡ºğŸ‡² ç¾å›½
      - ğŸŒ å…¶å®ƒåœ°åŒº
      - ğŸŒ  IPLCä¸“çº¿ 
      - â™»ï¸ å»¶è¿Ÿæœ€ä½
      - ğŸ”¯ æ•…éšœè½¬ç§»  
  - name: "ğŸ”¯ æ•…éšœè½¬ç§»"
    type: fallback
    url: "https://cp.cloudflare.com/generate_204"
    interval: 30
  - name: "â™»ï¸ å»¶è¿Ÿæœ€ä½"
    type: url-test
    proxies:
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯
    type: url-test
    filter: "æ¸¯|HK|hk|Hong Kong|HongKong|hongkong"
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name:ğŸ‡¹ğŸ‡¼ å°æ¹¾
    type: url-test
    filter: "å°|æ–°åŒ—|å½°åŒ–|TW||twTaiwan"
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name:ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    type: url-test
    filter: "æ–°åŠ å¡|å¡|ç‹®åŸ|SG|sg|Singapore"
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name:ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    type: url-test
    filter: "æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|jp|Japan"
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name:ğŸ‡ºğŸ‡² ç¾å›½
    type: url-test
    filter: "ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|ç›åŸ|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|us|United States"
    url: "https://cp.cloudflare.com/generate_204"
    interval: 300
  - name:ğŸŒ å…¶å®ƒåœ°åŒº
    type: select
    filter: "éŸ©|é¦–å°”|é©¬|å‰éš†å¡"
  - name:ğŸŒ  IPLCä¸“çº¿
    type: select
    filter: "IPLC|iplc|IEPL|iepl|ä¸“"

proxy-providers:

rule-providers:
  global_proxy
    behavior: classical # domain ipcidr
    interval: 259200
    path: ./global.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/HAOLANYANG/clash_rule@main/rules/global.list"
  direct
    behavior: classical
    interval: 259200
    path: ./Direct.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/HAOLANYANG/clash_rule@main/rules/Direct.list"
  cn-dns
    behavior: classical
    interval: 259200
    path: ./ChinaDNS.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaDNS/ChinaDNS.yaml"
  mipush
    behavior: classical
    interval: 259200
    path: ./mipush.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/HAOLANYANG/clash_rule@main/rules/mipush.list"
  cn-bgp-ip
    behavior: ipcidr
    interval: 259200
    path: ./ChinaIPsBGP_Classical.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaIPsBGP/ChinaIPsBGP_IP.yaml"
  cn-steam
    behavior: classical
    interval: 259200
    path: ./SteamCN.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/SteamCN.list"
  coolapk
    behavior: classical
    interval: 259200
    path: ./Coolapk.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Coolapk/Coolapk.yaml"
  apple
    behavior: classical
    interval: 259200
    path: ./Apple_Classical.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Classical.yaml"
  openai
    behavior: classical
    interval: 259200
    path: ./OpenAI.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"
  gemini
    behavior: classical
    interval: 259200
    path: ./Gemini.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Gemini/Gemini.yaml"
  bardai
    behavior: classical
    interval: 259200
    path: ./BardAI.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BardAI/BardAI.yaml"
  youtube
    behavior: classical
    interval: 259200
    path: ./YouTube.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"
  youtubemusic
    behavior: classical
    interval: 259200
    path: ./YouTubeMusic.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
  netflix
    behavior: classical
    interval: 259200
    path: ./Netflix_Classical.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix_Classical.yaml"
  line
    behavior: classical
    interval: 259200
    path: ./Line.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Line/Line.yaml"
  whatsapp
    behavior: classical
    interval: 259200
    path: ./Whatsapp.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Whatsapp/Whatsapp.yaml"
  github
    behavior: classical
    interval: 259200
    path: ./GitHub.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml"
  speedtest
    behavior: classical
    interval: 259200
    path: ./Speedtest.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Speedtest/Speedtest.yaml"
  telegram
    behavior: classical
    interval: 259200
    path: ./Telegram.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"
  microsoft
    behavior: classical
    interval: 259200
    path: ./Microsoft.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"
  google
    behavior: classical
    interval: 259200
    path: ./Google.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"
  okx
    behavior: classical
    interval: 259200
    path: ./OKX.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OKX/OKX.yaml"
  binance
    behavior: classical
    interval: 259200
    path: ./Binance.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Binance/Binance.yaml"
  blockchain
    behavior: classical
    interval: 259200
    path: ./blockchain.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/HAOLANYANG/clash_rule@main/rules/blockchain.list"
  pay
    behavior: classical
    interval: 259200
    path: ./pay.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/HAOLANYANG/clash_rule@main/rules/pay.list"
  visa
    behavior: classical
    interval: 259200
    path: ./VISA.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/VISA/VISA.yaml"
  privatetracker
    behavior: classical
    interval: 259200
    path: ./PrivateTracker.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PrivateTracker/PrivateTracker.yaml"
  download
    behavior: classical
    interval: 259200
    path: ./Download.list
    type: http
    url: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Download.list"
  cn-max
    behavior: classical
    interval: 259200
    path: ./ChinaMax.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax.yaml"
  cn-max-domain
    behavior: domain
    interval: 259200
    path: ./ChinaMax_Domain.txt
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_Domain.txt"
  cn-ip
    behavior: ipcidr
    interval: 259200
    path: ./ChinaMax_IP.yaml
    type: http
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_IP.yaml"
    
rules:
  - RULE-SET,global_proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-dns,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,mipush,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-bgp-ip,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-steam,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,coolapk,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,apple,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,openai,ğŸ’¬ OpenAi
  - RULE-SET,gemini,ğŸ’¬ OpenAi
  - RULE-SET,bardai,ğŸ’¬ OpenAi
  - RULE-SET,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,youtubemusic,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,netflix,ğŸ¥ æµåª’ä½“è§£é”
  - RULE-SET,line,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,whatsapp,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,github,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,speedtest,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegram,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,microsoft,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,okx,ğŸŸ¨ åŒºå—é“¾
  - RULE-SET,binance,ğŸŸ¨ åŒºå—é“¾
  - RULE-SET,blockchain,ğŸŸ¨ åŒºå—é“¾
  - RULE-SET,pay,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,visa,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,privatetracker,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,download,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-max,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-max-domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,cn-ip,ğŸ¯ å…¨çƒç›´è¿
